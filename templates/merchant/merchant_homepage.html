{% extends "base.html" %}
{% load static %}
{% block content %}
    <div class="container-fluid main-sec" style="min-height: 75vh;">
        <div class="row m-0 mx-auto" style="padding: 0; margin:0; width: 100%; max-width: 1800px;">
            <div class="col-lg-4 mx-auto" style="max-width: 400px;">
                <div class="py-3 text-center" style="background-color: white; border-radius: 10px;">
                    <img class="profile-img" src="/media/profile_pics/default.png" width="100" height="100">
                    <div class="mt-3">
                        <div class="border-bottom mx-auto" style="width: 90%;">
                            <p>
                                <i class="name"></i>
                                <strong>Name: {{ merchant.merchant_name }}</strong>

                            </p>
                        </div>
                        <div class="mx-auto mt-3" style="width: 90%;">
                            <p class="text-secondary text-start mb-2">Personal Information</p>
                            <p>
                                <strong>
                                    Email: {{ merchant.user.email }}
                                </strong>
                            </p>
                            <p>
                                <strong>
                                    Phone: {{ merchant.user.phone }}
                                </strong>
                            </p>
                            <p>
                                <a href="/user/profile">
                                    <button class="btn btn-info">Modify Personal Information</button>
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-8 mt-3 mt-lg-0 mx-auto" style="max-width: 1400px!important;">
                <div class="py-3 job_info_card h-100">
                    <div class="row text-md-center text-center mt-4 m-0">
                        <h4>Merchant Homepage</h4>
                    </div>
                    <div class="d-block d-sm-flex justify-content-between">
                        <!-- Button trigger modal -->
                        <button type="button" class="btn btn-info" data-toggle="modal" data-target="#exampleModal">
                            Add New Product
                        </button>

                        <form method="get" action="{% url 'add_new_product' %}" id="add_new_product_form">

                            <!-- Modal -->
                            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
                                 aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">What do you want to add?</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <fieldset id="group1">
                                                <p class="mb-0">I want to...</p>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="trade_type"
                                                           id="flexRadioDefault1" checked value="sell">

                                                    <label class="form-check-label" for="flexRadioDefault1">
                                                        Sell a product
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="trade_type"
                                                           id="flexRadioDefault2" value="rent">

                                                    <label class="form-check-label" for="flexRadioDefault2">
                                                        Rent a product
                                                    </label>
                                                </div>
                                            </fieldset>
                                            <br>
                                            <fieldset id="group2">
                                                <p class="mb-0">The product is...</p>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="product_type"
                                                           id="product_type_e_bike" checked value="e_bike">
                                                    <label class="form-check-label" for="product_type_e-bike">

                                                        E-Bike
                                                    </label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="product_type"
                                                           id="product_type_e_bike_accessories" value="accessories">
                                                    <label class="form-check-label"
                                                           for="product_type_e_bike_accessories">

                                                        E-Bike Accessories
                                                    </label>
                                                </div>
                                            </fieldset>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close
                                            </button>
                                            <button type="submit" class="btn btn-info">
                                                Confirm
                                            </button>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>

                        <div class="mt-3 m-sm-0">
                            <button class="btn btn-dark d-none" id="select-all-btn" onclick="selectAll()">Select All
                            </button>
                            <button class="btn btn-light" id="select-btn" onclick="selectCancelToggle()">Select
                            </button>
                            <button class="btn btn-danger d-none" id="delete-btn">Delete</button>
                            <button class="btn btn-secondary d-none" id="cancel-btn" onclick="">
                                Cancel
                            </button>
                        </div>

                    </div>

                    {% if not products %}
                        <div class="d-flex justify-content-center">
                            <div class="alert alert-secondary mt-4 w-100 text-md-center text-start" role="alert">
                                <p class="m-0">You do not have any product, please add a new product.</p>
                            </div>
                        </div>
                    {% endif %}

                    <div>
                        <div class="row m-0 d-flex justify-content-xs-center justify-content-sm-start">
                            {% for p in products %}
                                <div class="col-12 col-sm-6 col-md-4 mt-3 p-0">
                                    <input type="checkbox" id="{{ p.id }}-checkbox" class="product-checkbox d-none" on>
                                    <div class="card">
                                        <div style="position: relative;" class="overlay_container"
                                             onclick="window.location.href='{% url 'product_detail' p.id %}'">
                                            <img src="{{ p.image.url }}" class="card-img-top img-fluid overlay_img"
                                                 alt="...">
                                            <p class="overlay_text text-light text-uppercase w-100"
                                               style="position: absolute;
                                               top: 50%;
                                               left: 50%;
                                               transform: translate(-50%,-50%);
                                               text-align: center">
                                                Click to View Details
                                            </p>
                                        </div>
                                        <div class="card-body p-2">
                                            <h5 class="card-title m-0">
                                                {{ p.product_name }}
                                            </h5>
                                            <p class=" card-text text-uppercase text-left m-0">
                                                Price: ${{ p.price }}
                                            </p>
                                            <p class=" card-text text-uppercase text-left m-0">
                                                Stock: 5
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>

                    <br>
                </div>
            </div>
        </div>
    </div>
    <script>
        function selectCancelToggle() {
            const checkBoxes = document.getElementsByClassName('product-checkbox');
            const selectAllBtn = document.getElementById('select-all-btn');
            const cancelBtn = document.getElementById('cancel-btn');
            const deleteBtn = document.getElementById('delete-btn');
            const selectBtn = document.getElementById('select-btn');
            let items = [selectAllBtn, cancelBtn, deleteBtn, selectBtn];
            for (let c of checkBoxes) {
                items.push(c);
                c.checked = false;
            }
            for (let i of items) {
                i.classList.toggle('d-none');
            }
        }

        function selectAll() {
            const checkBoxes = document.getElementsByClassName('product-checkbox');
            for (let c of checkBoxes) {
                c.checked = true;
            }
        }
    </script>
{% endblock content %}